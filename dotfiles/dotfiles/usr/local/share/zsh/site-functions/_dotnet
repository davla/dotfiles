#compdef dotnet

compdef _dotnet dotnet

_dotnet()
{
  local completions=("$(dotnet complete "$words")")

  # If the completion list is empty, just continue with filename selection
  if [ -z "$completions" ]
  then
    _arguments '*::arguments: _normal'
    return
  fi

  _values 'command' "${(ps:\n:)completions}"
}

if [ "$funcstack[1]" = "_dotnet" ]; then
    _dotnet "$@"
fi
